<!DOCTYPE html>
<html>

<head>
    <script src="http://maps.googleapis.com/maps/api/js"></script>
    <script>
        
        var destinations = [];
        var map;


        function getDestinations() {
            destinations.push({
                latLng: { lat: 51.0460156275713, lng: -114.05788480146 },
                ID: "kml_276",
                RESOURCE_NM: "Historic City Hall"

            }, {
                latLng: { lat: 51.0465212116674, lng: -114.059915310586 },
                ID: "kml_262",
                RESOURCE_NM: "Olympic Plaza"
            });
        }

        getDestinations();
        
        function getDirections(array) {
            var directionsService = new google.maps.DirectionsService;
            var directionsDisplay = new google.maps.DirectionsRenderer;
            directionsDisplay.setMap(map);
            
            //try and use if click new points?
            var onChangeHandler = function() {
                calculateAndDisplayRoute(directionsService, directionsDisplay);
            };
            
            
            
            calculateAndDisplayRoute(directionsService, directionsDisplay);
        }
        
        function calculateAndDisplayRoute(directionsService, directionsDisplay, array) {
             var waypts = [];
             
            
            directionsService.route({
                origin: destinations[0].latLng,
                destination: destinations[1].latLng,
                travelMode: google.maps.TravelMode.WALKING
            }, function (response, status) {
                if (status === google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
        }
      
        
        function initialize() {

            
           

            var myLatLng = { lat: 51.0460156275713, lng: -114.05788480146 };

            var mapProp = {
                center: new google.maps.LatLng(myLatLng.lat, myLatLng.lng),
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("googleMap"), mapProp);


            for (var i = 0; i < destinations.length; i++) {
                var item = destinations[i];
                new google.maps.Marker({
                    position: item.latLng,
                    map: map,
                    label: i.toString(),
                    title: item.title
                });
            }
            
            getDirections(destinations);
        }

        google.maps.event.addDomListener(window, 'load', initialize);


    </script>
</head>

<body>
    <table style="width:100%; height: 100%;text-align: center">
        <tr>
            <td width="50%">
                <h2>Map</h2>
            </td>
            <td>
                <h2>Destination</h2>
            </td>

        </tr>
        <tr>
            <td colspan="2">
                <div id="googleMap" style="width: 100%; height: 600px;"></div>
                <div id="destination">Testination</div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table style="width: 100%; text-align: center">
                    <tr>
                        <td width="30%" style="text-align: center">
                            <h2>Prev Destination</h2>
                        </td>
                        <td  width="40%">
                            <h2>Arrived at Destination</h2>
                        </td>
                        <td  width="30%">
                            <h2>Next Destination</h2>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

</body>

</html>